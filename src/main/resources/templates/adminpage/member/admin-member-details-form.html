<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/adminpage/default-layout}">
<head>
    <meta charset="UTF-8">
    <title>회원 정보</title>
</head>
<body>
    <div layout:fragment="content">
        <div class="content">
            <h2 th:text="${member.memberId}"></h2>
            <hr>
            회원번호 : <span th:text="${member.memberNo}"></span><br />
            가입날짜 : <span th:text="${#temporals.format(member.memberCreatedAt, 'yyyy년 MM월 dd일 HH시 mm분 ss초')}"></span><br />
            아이디 : <span th:text="${member.memberId}"></span><br />
            닉네임 : <span th:text="${member.nickname}"></span><br />
            이름 : <span th:text="${member.name}"></span><br />
            성별 : <span th:if="${member.isMan == true}">남</span>
            <span th:if="${member.isMan == false}">여</span> <br/>
            생일 : <span th:text="${#temporals.format(member.birth, 'yyyy년 MM월 dd일')}"></span><br />
            핸드폰번호 : <span th:text="${member.phoneNumber}"></span><br />
            이메일 : <span th:text="${member.email}"></span><br />
            회원등급 : <span th:text="${member.membershipGrade}"></span><br />
            회원상태 : <span th:text="${member.memberStatusName}"></span><br />
            회원 권한
            <table>
                <thead>
                <tr>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="memberRole : ${memberRoles}">
                    <td th:text="${memberRole.getRole()}"></td>
                </tr>
                </tbody>
            </table>
            <div th:if="${memberRoles.get(0).getRole()} == 'ADMIN'">
                <form method="post" id="delete_role_form" th:action="@{|/admin/members/${member.memberNo}/${memberRoles.get(0).getRoleNo()}/member-role/delete|}">
                    <button class="btn btn-dark" type="submit">어드민 권한 삭제</button>
                </form>
            </div>
            <div th:if="${memberRoles.get(0).getRole()} != 'ADMIN'">
                <form method="post" id="Authorization_form" th:action="@{|/admin/members/${member.memberId}/member-role/add|}">
                    <input type="hidden" name="roleName" value="ADMIN">
                    <button class="btn btn-info" style="color:white;" type="submit">어드민 권한 부여</button>
                </form>
            </div>
            <hr>
            <div>
                <button class="btn btn-danger" style="margin-bottom: 10px;" onclick="selectBlockBtnInMemberDetails()">차단하기</button><br/>
                <form method="post" id="block_form" th:action="@{|/admin/members/${member.memberId}/modify/member-status|}" style="display: none;">
                    <input type="hidden" name="memberStatusName" value="차단회원">
                    <div>
                        <span>차단 사유</span><br/>
                        <input style="width:500px;" type="textarea" id="statusChangedReason" th:field="${memberStatusChangeRequestDto.statusChangedReason}">
                    </div>
                    <button class="btn btn-dark" style="margin-top: 10px;" type ="submit">차단완료</button>
                </form>
            </div>
        </div>
        <script th:src="@{/adminpage/member/js/MemberStatusBtnSelect.js}"></script>
    </div>
</body>
</html>